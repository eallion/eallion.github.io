!function(b,a){"function"==typeof define&&define.amd?define("waterfall",function(){return a}):"object"==typeof module&&module.exports?module.exports=a:b.waterfall=a}(this,function(d){var b,a,n,g;function k(a){return window.getComputedStyle(a)}function c(a,b){return parseFloat(k(b)["margin"+a])||0}function h(a){return parseFloat(a)+"px"}function u(a){return parseFloat(a.style.top)}function f(a){return parseFloat(a.style.left)}function i(a){return parseFloat(k(a).width)}function o(a){return parseFloat(k(a).height)}function e(a){return u(a)+o(a)+c("Bottom",a)}function l(a){return f(a)+i(a)+c("Right",a)}function m(a){a=a.sort(function(a,b){var c=e(b)-e(a);return c||f(b)-f(a)})}function v(b){var a=b;m(a),this.add=function(b){a.push(b),m(a),a.pop()},this.min=function(){return a[a.length-1]},this.max=function(){return a[0]}}function j(a,b,c){a.style.position="absolute",a.style.top=h(b),a.style.left=h(c)}function t(a){j(a,0,c("Left",a))}function s(a,b){j(b,a.style.top,l(a)+c("Left",b))}function p(a,b){j(b,e(a)+c("Top",b),f(a))}function q(a,b){a.style.position="relative",a.style.height=h(e(b)+c("Bottom",b))}function r(a,b){return l(a[b-1])+i(a[b])<=i(d)}"string"==typeof d&&(d=document.querySelector(d)),b=d.children,b.length&&t(b[0]);for(a=1;a<b.length&&r(b,a);a++)s(b[a-1],b[a]);for(n=[].slice.call(b,0,a),g=new v(n);a<b.length;a++)p(g.min(),b[a]),g.add(b[a]);q(d,g.max())})